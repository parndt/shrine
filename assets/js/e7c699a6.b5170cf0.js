"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5911],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>k});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),i=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):p(p({},t),e)),a},m=function(e){var t=i(e.components);return n.createElement(o.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},y=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),d=i(a),y=r,k=d["".concat(o,".").concat(y)]||d[y]||c[y]||l;return a?n.createElement(k,p(p({ref:t},m),{},{components:a})):n.createElement(k,p({ref:t},m))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,p=new Array(l);p[0]=y;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[d]="string"==typeof e?e:r,p[1]=s;for(var i=2;i<l;i++)p[i]=a[i];return n.createElement.apply(null,p)}return n.createElement.apply(null,a)}y.displayName="MDXCreateElement"},8615:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>o,default:()=>k,frontMatter:()=>s,metadata:()=>i,toc:()=>d});var n=a(7462),r=a(3366),l=(a(7294),a(3905)),p=["components"],s={title:"Determine MIME Type"},o=void 0,i={unversionedId:"plugins/determine_mime_type",id:"plugins/determine_mime_type",title:"Determine MIME Type",description:"The determinemimetype plugin allows you to determine",source:"@site/../doc/plugins/determine_mime_type.md",sourceDirName:"plugins",slug:"/plugins/determine_mime_type",permalink:"/docs/plugins/determine_mime_type",draft:!1,editUrl:"https://github.com/shrinerb/shrine/edit/master/doc/../doc/plugins/determine_mime_type.md",tags:[],version:"current",lastUpdatedBy:"Janko Marohni\u0107",lastUpdatedAt:1571442013,formattedLastUpdatedAt:"Oct 18, 2019",frontMatter:{title:"Determine MIME Type"},sidebar:"plugins",previous:{title:"Add Metadata",permalink:"/docs/plugins/add_metadata"},next:{title:"Infer Extension",permalink:"/docs/plugins/infer_extension"}},m={},d=[{value:"Analyzers",id:"analyzers",level:2},{value:"Analyzer Options",id:"analyzer-options",level:2},{value:"Issues",id:"issues",level:2},{value:"API",id:"api",level:2},{value:"Instrumentation",id:"instrumentation",level:2}],c={toc:d},y="wrapper";function k(e){var t=e.components,a=(0,r.Z)(e,p);return(0,l.kt)(y,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"The ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/shrinerb/shrine/blob/master/lib/shrine/plugins/determine_mime_type.rb"},(0,l.kt)("inlineCode",{parentName:"a"},"determine_mime_type"))," plugin allows you to determine\nand store the actual MIME type of the file analyzed from file content."),(0,l.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,l.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,l.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,l.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":determine_mime_type"))))),(0,l.kt)("p",null,"By default the UNIX ",(0,l.kt)("a",{parentName:"p",href:"http://linux.die.net/man/1/file"},"file")," utility is used to determine the MIME type, and the\nresult is automatically written to the ",(0,l.kt)("inlineCode",{parentName:"p"},"mime_type")," metadata field. You can\nchoose a different built-in MIME type analyzer, for example:"),(0,l.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,l.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,l.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,l.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":determine_mime_type"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", analyzer"),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,l.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":marcel"))))),(0,l.kt)("h2",{id:"analyzers"},"Analyzers"),(0,l.kt)("p",null,"The following analyzers are accepted:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},":file")),(0,l.kt)("td",{parentName:"tr",align:"left"},"(",(0,l.kt)("strong",{parentName:"td"},"Default"),"). Uses the ",(0,l.kt)("a",{parentName:"td",href:"http://linux.die.net/man/1/file"},"file")," utility to determine the MIME type from file contents. It is installed by default on most operating systems, but the ",(0,l.kt)("a",{parentName:"td",href:"http://gnuwin32.sourceforge.net/packages/file.htm"},"Windows equivalent")," needs to be installed separately.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},":fastimage")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Uses the ",(0,l.kt)("a",{parentName:"td",href:"https://github.com/sdsykes/fastimage"},"fastimage")," gem to determine the MIME type from file contents. Fastimage is optimized for speed over accuracy. Best used for image content.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},":filemagic")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Uses the ",(0,l.kt)("a",{parentName:"td",href:"https://github.com/blackwinter/ruby-filemagic"},"ruby-filemagic")," gem to determine the MIME type from file contents, using a similar MIME database as the ",(0,l.kt)("inlineCode",{parentName:"td"},"file")," utility. Unlike the ",(0,l.kt)("inlineCode",{parentName:"td"},"file")," utility, ruby-filemagic works on Windows without any setup.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},":mimemagic")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Uses the ",(0,l.kt)("a",{parentName:"td",href:"https://github.com/minad/mimemagic"},"mimemagic")," gem to determine the MIME type from file contents. Unlike ruby-filemagic, mimemagic is a pure-ruby solution, so it will work across all Ruby implementations.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},":marcel")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Uses the ",(0,l.kt)("a",{parentName:"td",href:"https://github.com/basecamp/marcel"},"marcel")," gem to determine the MIME type from file contents. Marcel is Basecamp's wrapper around mimemagic, it adds priority logic (preferring magic over name when given both), some extra type definitions, and common type subclasses (including Keynote, Pages, etc).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},":mime_types")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Uses the ",(0,l.kt)("a",{parentName:"td",href:"https://github.com/mime-types/ruby-mime-types"},"mime-types")," gem to determine the MIME type from the file extension. Note that unlike other solutions, this analyzer is not guaranteed to return the actual MIME type of the file.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},":mini_mime")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Uses the ",(0,l.kt)("a",{parentName:"td",href:"https://github.com/discourse/mini_mime"},"mini_mime")," gem to determine the MIME type from the file extension. Note that unlike other solutions, this analyzer is not guaranteed to return the actual MIME type of the file.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},":content_type")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Retrieves the value of the ",(0,l.kt)("inlineCode",{parentName:"td"},"#content_type"),' attribute of the IO object. Note that this value normally comes from the "Content-Type" request header, so it\'s not guaranteed to hold the actual MIME type of the file.')))),(0,l.kt)("p",null,"You'll need to ensure the file utility or gem is in installed on your system\nfor Shrine to use the analyzer."),(0,l.kt)("h2",{id:"analyzer-options"},"Analyzer Options"),(0,l.kt)("p",null,"Currently, Marcel is the only analyzer that accepts options to be passed in.\nAnalyzer options can be set in one of two ways:"),(0,l.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,l.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,l.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,l.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":determine_mime_type"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", analyzer"),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,l.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":marcel"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", analyzer_options"),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," { filename_fallback"),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,l.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},"true"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," }")),"\n",(0,l.kt)("span",{parentName:"code",className:"line"}),"\n",(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"# or")),"\n",(0,l.kt)("span",{parentName:"code",className:"line"}),"\n",(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,l.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":determine_mime_type"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", analyzer"),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,l.kt)("span",{parentName:"span",style:{color:"#97E1F1"}},"->"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," (io, analyzers) "),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"do")),"\n",(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"  mime_type "),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"="),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," analyzers["),(0,l.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":marcel"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"].call(io, filename_fallback"),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,l.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},"true"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},")")),"\n",(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"end"))))),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},":filename_fallback")," option for Marcel analyzer lets it use the filename as\na fallback option when it fails to determine the MIME type from the file\ncontent. Set ",(0,l.kt)("inlineCode",{parentName:"p"},":filename_fallback")," to ",(0,l.kt)("inlineCode",{parentName:"p"},"true")," in order to fallback to using the\nfilename or set to ",(0,l.kt)("inlineCode",{parentName:"p"},"false")," to not use the filename (this is the default)."),(0,l.kt)("h2",{id:"issues"},"Issues"),(0,l.kt)("p",null,"If you find using a single analyzer is not able to recognize all of the file\ntypes in your application, you can build your own custom analyzer and combine\nthe built-in analyzers. For example, if you want to correctly determine MIME\ntype of .css, .js, .json, .csv, .xml, or similar text-based files, you can\ncombine ",(0,l.kt)("inlineCode",{parentName:"p"},"file")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"mime_types")," analyzers:"),(0,l.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,l.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,l.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,l.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":determine_mime_type"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", analyzer"),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,l.kt)("span",{parentName:"span",style:{color:"#97E1F1"}},"->"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," (io, analyzers) "),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"do")),"\n",(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"  mime_type "),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"="),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," analyzers["),(0,l.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":file"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"].call(io)")),"\n",(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"  mime_type "),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"="),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," analyzers["),(0,l.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":mime_types"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"].call(io) "),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"if"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," mime_type "),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"=="),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,l.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,l.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"text/plain"),(0,l.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"')),"\n",(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"  mime_type")),"\n",(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"end"))))),(0,l.kt)("h2",{id:"api"},"API"),(0,l.kt)("p",null,"You can also use the methods for determining the MIME type directly:"),(0,l.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,l.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,l.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"# or YourUploader.determine_mime_type(io)")),"\n",(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"Shrine"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},".determine_mime_type(io) "),(0,l.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},'#=> "image/jpeg" (calls the defined analyzer)')),"\n",(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"# or just")),"\n",(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"Shrine"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},".mime_type(io) "),(0,l.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},'#=> "image/jpeg" (calls the defined analyzer)')),"\n",(0,l.kt)("span",{parentName:"code",className:"line"}),"\n",(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"# or YourUploader.mime_type_analyzers")),"\n",(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"Shrine"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},".mime_type_analyzers["),(0,l.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":file"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"].call(io) "),(0,l.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},'#=> "image/jpeg" (calls a built-in analyzer)'))))),(0,l.kt)("h2",{id:"instrumentation"},"Instrumentation"),(0,l.kt)("p",null,"If the ",(0,l.kt)("inlineCode",{parentName:"p"},"instrumentation")," plugin has been loaded, the ",(0,l.kt)("inlineCode",{parentName:"p"},"determine_mime_type")," plugin\nadds instrumentation around MIME type analyzation."),(0,l.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,l.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,l.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"# instrumentation plugin needs to be loaded *before* determine_mime_type")),"\n",(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,l.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":instrumentation")),"\n",(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,l.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":determine_mime_type"))))),(0,l.kt)("p",null,"Analyzing MIME type will trigger a ",(0,l.kt)("inlineCode",{parentName:"p"},"mime_type.shrine")," event with the following\npayload:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Key"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},":io")),(0,l.kt)("td",{parentName:"tr",align:"left"},"The IO object")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("inlineCode",{parentName:"td"},":uploader")),(0,l.kt)("td",{parentName:"tr",align:"left"},"The uploader class that sent the event")))),(0,l.kt)("p",null,"A default log subscriber is added as well which logs these events:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"MIME Type (33ms) \u2013 {:io=>StringIO, :uploader=>Shrine}\n")),(0,l.kt)("p",null,"You can also use your own log subscriber:"),(0,l.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,l.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,l.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,l.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":determine_mime_type"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", log_subscriber"),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,l.kt)("span",{parentName:"span",style:{color:"#97E1F1"}},"->"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," (event) {")),"\n",(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"  "),(0,l.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"Shrine"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},".logger.info "),(0,l.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"JSON"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},".generate(name"),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," event.name, duration"),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," event.duration, "),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"**"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"event.payload)")),"\n",(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"}"))))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'{"name":"mime_type","duration":24,"io":"#<StringIO:0x00007fb7c5b08b80>","uploader":"Shrine"}\n')),(0,l.kt)("p",null,"Or disable logging altogether:"),(0,l.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,l.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,l.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,l.kt)("span",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,l.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":determine_mime_type"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", log_subscriber"),(0,l.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,l.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,l.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},"nil"))))))}k.isMDXComponent=!0}}]);