"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3173],{3905:(e,a,t)=>{t.d(a,{Zo:()=>m,kt:()=>k});var n=t(7294);function p(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function s(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?s(Object(t),!0).forEach((function(a){p(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function r(e,a){if(null==e)return{};var t,n,p=function(e,a){if(null==e)return{};var t,n,p={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||(p[t]=e[t]);return p}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(p[t]=e[t])}return p}var o=n.createContext({}),i=function(e){var a=n.useContext(o),t=a;return e&&(t="function"==typeof e?e(a):l(l({},a),e)),t},m=function(e){var a=i(e.components);return n.createElement(o.Provider,{value:a},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},N=n.forwardRef((function(e,a){var t=e.components,p=e.mdxType,s=e.originalType,o=e.parentName,m=r(e,["components","mdxType","originalType","parentName"]),c=i(t),N=p,k=c["".concat(o,".").concat(N)]||c[N]||d[N]||s;return t?n.createElement(k,l(l({ref:a},m),{},{components:t})):n.createElement(k,l({ref:a},m))}));function k(e,a){var t=arguments,p=a&&a.mdxType;if("string"==typeof e||p){var s=t.length,l=new Array(s);l[0]=N;var r={};for(var o in a)hasOwnProperty.call(a,o)&&(r[o]=a[o]);r.originalType=e,r[c]="string"==typeof e?e:p,l[1]=r;for(var i=2;i<s;i++)l[i]=t[i];return n.createElement.apply(null,l)}return n.createElement.apply(null,t)}N.displayName="MDXCreateElement"},6589:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>m,contentTitle:()=>o,default:()=>k,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var n=t(7462),p=t(3366),s=(t(7294),t(3905)),l=["components"],r={title:"Shrine 2.5.0"},o=void 0,i={unversionedId:"release_notes/2.5.0",id:"release_notes/2.5.0",title:"Shrine 2.5.0",description:"New features",source:"@site/../doc/release_notes/2.5.0.md",sourceDirName:"release_notes",slug:"/release_notes/2.5.0",permalink:"/docs/release_notes/2.5.0",draft:!1,editUrl:"https://github.com/shrinerb/shrine/edit/master/doc/../doc/release_notes/2.5.0.md",tags:[],version:"current",lastUpdatedBy:"Janko Marohni\u0107",lastUpdatedAt:1571049580,formattedLastUpdatedAt:"Oct 14, 2019",frontMatter:{title:"Shrine 2.5.0"},sidebar:"release_notes",previous:{title:"Shrine 2.6.0",permalink:"/docs/release_notes/2.6.0"},next:{title:"Shrine 2.4.1",permalink:"/docs/release_notes/2.4.1"}},m={},c=[{value:"New features",id:"new-features",level:2},{value:"Other improvements",id:"other-improvements",level:2},{value:"Backwards compatibility",id:"backwards-compatibility",level:2},{value:"Documentation",id:"documentation",level:2}],d={toc:c},N="wrapper";function k(e){var a=e.components,t=(0,p.Z)(e,l);return(0,s.kt)(N,(0,n.Z)({},d,t,{components:a,mdxType:"MDXLayout"}),(0,s.kt)("h2",{id:"new-features"},"New features"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"The ",(0,s.kt)("inlineCode",{parentName:"li"},"add_metadata")," plugin has been extended to enable extracting and saving\nmultiple metadata values at once. This is useful when you have tools which\nextract various metadata in a single command.")),(0,s.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,s.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,s.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,s.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":add_metadata")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"}),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"add_metadata "),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"do"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," |io, context|")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"  movie "),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"="),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,s.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"FFMPEG"),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"::"),(0,s.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"Movie"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"."),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"new"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"(io.path)")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"}),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"  { "),(0,s.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,s.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"duration"),(0,s.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"   "),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"=>"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," movie.duration,")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"    "),(0,s.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,s.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"bitrate"),(0,s.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"    "),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"=>"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," movie.bitrate,")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"    "),(0,s.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,s.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"resolution"),(0,s.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"=>"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," movie.resolution,")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"    "),(0,s.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,s.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"frame_rate"),(0,s.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"=>"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," movie.frame_rate }")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"end")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"}),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"# You can also optionally add metadata reader methods to the UploadedFile")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"metadata_method "),(0,s.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":duration"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", "),(0,s.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":bitrate"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", "),(0,s.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":resolution"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", "),(0,s.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":frame_rate"))))),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"The ",(0,s.kt)("inlineCode",{parentName:"li"},"UploadedFile#dimensions")," method will now be added when loading the\n",(0,s.kt)("inlineCode",{parentName:"li"},"store_dimensions")," plugin, which returns a two-element array of width and\nheight.")),(0,s.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,s.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,s.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,s.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":store_dimensions"))))),(0,s.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,s.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,s.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"uploaded_file "),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"="),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," uploader.upload(image)")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"}),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"uploaded_file.width      "),(0,s.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"#=> 500")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"uploaded_file.height     "),(0,s.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"#=> 400")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"uploaded_file.dimensions "),(0,s.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"#=> [500, 400] (new)"))))),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"The ",(0,s.kt)("inlineCode",{parentName:"li"},":fallback_original_option")," has been added to ",(0,s.kt)("inlineCode",{parentName:"li"},"versions")," plugin, allowing\nyou to disable automatic fallback to the cached file when using backgrounding,\nso that you can use a default URL instead.")),(0,s.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,s.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,s.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,s.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":versions"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", fallback_to_original"),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,s.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},"false"))))),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"The ",(0,s.kt)("inlineCode",{parentName:"li"},"rack_file")," plugin now enables the uploaders themselves to accept Rack\nuploaded file hashes for upload, in addition to attachers.")),(0,s.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,s.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,s.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,s.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":rack_file"))))),(0,s.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,s.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,s.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"params["),(0,s.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":file"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"] "),(0,s.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},'#=> {:tempfile=>#<Tempfile>, :name=>"file", ...}')),"\n",(0,s.kt)("span",{parentName:"code",className:"line"}),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"uploaded_file "),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"="),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," uploader.upload(params["),(0,s.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":file"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"])")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"uploaded_file.original_filename "),(0,s.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},'#=> "nature.jpg"')),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"uploaded_file.mime_type         "),(0,s.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},'#=> "image/jpeg"'))))),(0,s.kt)("h2",{id:"other-improvements"},"Other improvements"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"The validation helper methods now also return whether the validation\nsuceeded, which makes it much easier to do conditional validation.")),(0,s.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,s.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,s.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,s.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":validation_helpers")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"}),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"Attacher"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},".validate "),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"do")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"  "),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"if"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," validate_extension_inclusion "),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"%"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"w[jpg jpeg png gif]")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"    validate_mime_type_inclusion "),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"%"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"w[image"),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"/"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"jpeg image"),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"/"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"png image"),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"/"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"gif]")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"  "),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"end")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"end"))))),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"A ",(0,s.kt)("inlineCode",{parentName:"li"},"Attacher.default_url")," method has been added to ",(0,s.kt)("inlineCode",{parentName:"li"},"default_url")," plugin, as a\nnew idiomatic way of declaring the default URL. This API better communicates\nthat the default URL functionality is tied only to the attacher. This block\nis now also evaluated in the context of a ",(0,s.kt)("inlineCode",{parentName:"li"},"Shrine::Attacher")," instance.")),(0,s.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,s.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,s.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,s.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":default_url")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"}),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"Attacher"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},".default_url "),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"do"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," |options|")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"  "),(0,s.kt)("span",{parentName:"span",style:{color:"#BF9EEE",fontStyle:"italic"}},"self"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"   "),(0,s.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"#=> #<Shrine::Attacher>")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"  name   "),(0,s.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"#=> :image")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"  record "),(0,s.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"#=> #<Photo>")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"}),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"  "),(0,s.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,s.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"/images/missing/"),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"#{"),(0,s.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"name"),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"}"),(0,s.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},".jpg"),(0,s.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"')),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"end"))))),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"The ",(0,s.kt)("inlineCode",{parentName:"p"},"validation_helpers")," plugin will now match the file extension in a case\ninsensitive way, so if you do ",(0,s.kt)("inlineCode",{parentName:"p"},'validate_extension_inclusion ["jpg"]'),", that\nwill now also pass for a file named ",(0,s.kt)("inlineCode",{parentName:"p"},"nature.JPG"),".")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"The ",(0,s.kt)("inlineCode",{parentName:"p"},"backgrounding")," plugin now also works for plain models, without an ORM.\nSpecifically, it doesn't depend on ",(0,s.kt)("inlineCode",{parentName:"p"},"Attacher.find_record")," being defined\nanymore.")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"The presign endpoint in the ",(0,s.kt)("inlineCode",{parentName:"p"},"direct_upload")," plugin now allows the ",(0,s.kt)("inlineCode",{parentName:"p"},"extension"),"\nquery parameter to be passed without a dot.")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"If the data hash used for instantiating a ",(0,s.kt)("inlineCode",{parentName:"p"},"Shrine::UploadedFile")," is not\nvalid, an explanatory ",(0,s.kt)("inlineCode",{parentName:"p"},"Shrine::Error")," will now be raised. Previously Shrine\nwould raise a ",(0,s.kt)("inlineCode",{parentName:"p"},"KeyError")," for a key that was missing.")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Shrine now detects whether two versions point to the same IO object, and\nraises a ",(0,s.kt)("inlineCode",{parentName:"p"},"Shrine::Error"),". Previously the upload would fail with an ",(0,s.kt)("inlineCode",{parentName:"p"},"IOError"),"\nwhen the same IO object would attempt to be uploaded the second time, which\nwasn't very descriptive.")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"When ",(0,s.kt)("inlineCode",{parentName:"p"},"remove_invalid")," plugin removes an invalid cached file, it now also\nremoves the dirty state from the attacher."))),(0,s.kt)("h2",{id:"backwards-compatibility"},"Backwards compatibility"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Passing a block when loading the ",(0,s.kt)("inlineCode",{parentName:"li"},"default_url")," plugin is now deprecated over\nthe new ",(0,s.kt)("inlineCode",{parentName:"li"},"Attacher.default_url"),".")),(0,s.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,s.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,s.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"# deprecated")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,s.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":default_url"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"do"),(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," |context|")),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"  "),(0,s.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,s.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"/images/missing/"),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"#{"),(0,s.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"context["),(0,s.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":name"),(0,s.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"]"),(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"}"),(0,s.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},".jpg"),(0,s.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"')),"\n",(0,s.kt)("span",{parentName:"code",className:"line"},(0,s.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"end"))))),(0,s.kt)("h2",{id:"documentation"},"Documentation"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},'Added the "Multiple Files" guide describing how to set up multiple file\nuploads using nested association attributes.')))}k.isMDXComponent=!0}}]);