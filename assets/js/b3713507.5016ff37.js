"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6715],{3905:(e,a,n)=>{n.d(a,{Zo:()=>m,kt:()=>N});var t=n(7294);function p(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function r(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function o(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?r(Object(n),!0).forEach((function(a){p(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function l(e,a){if(null==e)return{};var n,t,p=function(e,a){if(null==e)return{};var n,t,p={},r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||(p[n]=e[n]);return p}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(p[n]=e[n])}return p}var s=t.createContext({}),i=function(e){var a=t.useContext(s),n=a;return e&&(n="function"==typeof e?e(a):o(o({},a),e)),n},m=function(e){var a=i(e.components);return t.createElement(s.Provider,{value:a},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},k=t.forwardRef((function(e,a){var n=e.components,p=e.mdxType,r=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),d=i(n),k=p,N=d["".concat(s,".").concat(k)]||d[k]||c[k]||r;return n?t.createElement(N,o(o({ref:a},m),{},{components:n})):t.createElement(N,o({ref:a},m))}));function N(e,a){var n=arguments,p=a&&a.mdxType;if("string"==typeof e||p){var r=n.length,o=new Array(r);o[0]=k;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l[d]="string"==typeof e?e:p,o[1]=l;for(var i=2;i<r;i++)o[i]=n[i];return t.createElement.apply(null,o)}return t.createElement.apply(null,n)}k.displayName="MDXCreateElement"},9709:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>m,contentTitle:()=>s,default:()=>N,frontMatter:()=>l,metadata:()=>i,toc:()=>d});var t=n(7462),p=n(3366),r=(n(7294),n(3905)),o=["components"],l={title:"Shrine 2.17.0"},s=void 0,i={unversionedId:"release_notes/2.17.0",id:"release_notes/2.17.0",title:"Shrine 2.17.0",description:"New features",source:"@site/../doc/release_notes/2.17.0.md",sourceDirName:"release_notes",slug:"/release_notes/2.17.0",permalink:"/docs/release_notes/2.17.0",draft:!1,editUrl:"https://github.com/shrinerb/shrine/edit/master/doc/../doc/release_notes/2.17.0.md",tags:[],version:"current",lastUpdatedBy:"Janko Marohni\u0107",lastUpdatedAt:1571049580,formattedLastUpdatedAt:"Oct 14, 2019",frontMatter:{title:"Shrine 2.17.0"},sidebar:"release_notes",previous:{title:"Shrine 2.18.0",permalink:"/docs/release_notes/2.18.0"},next:{title:"Shrine 2.16.0",permalink:"/docs/release_notes/2.16.0"}},m={},d=[{value:"New features",id:"new-features",level:2},{value:"Other improvements",id:"other-improvements",level:2},{value:"Backwards compatibility",id:"backwards-compatibility",level:2}],c={toc:d},k="wrapper";function N(e){var a=e.components,n=(0,p.Z)(e,o);return(0,r.kt)(k,(0,t.Z)({},c,n,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"new-features"},"New features"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"download_endpoint")," plugin now accepts ad-hoc options when creating the\nendpoint instance, which override any plugin options."),(0,r.kt)("div",{parentName:"li","data-rehype-pretty-code-fragment":""},(0,r.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,r.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,r.kt)("span",{parentName:"code",className:"line"},(0,r.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"Shrine"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},".download_endpoint(disposition"),(0,r.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,r.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,r.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"attachment"),(0,r.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},")")))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Shrine::Attacher#assign_remote_url")," method in the ",(0,r.kt)("inlineCode",{parentName:"p"},"remote_url")," plugin\nnow accepts additional options forwarded to ",(0,r.kt)("inlineCode",{parentName:"p"},"Shrine#upload"),"."),(0,r.kt)("div",{parentName:"li","data-rehype-pretty-code-fragment":""},(0,r.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,r.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,r.kt)("span",{parentName:"code",className:"line"},(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"attacher.assign_remote_url(url, metadata"),(0,r.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," { "),(0,r.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,r.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"mime_type"),(0,r.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,r.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"=>"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,r.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,r.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"text/plain"),(0,r.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," })")))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Shrine::Attacher#assign_data_uri")," method has been added to the\n",(0,r.kt)("inlineCode",{parentName:"p"},"data_uri")," plugin, which accepts additional ",(0,r.kt)("inlineCode",{parentName:"p"},"Shrine#upload")," options."),(0,r.kt)("div",{parentName:"li","data-rehype-pretty-code-fragment":""},(0,r.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,r.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,r.kt)("span",{parentName:"code",className:"line"},(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"attacher.assign_data_uri(uri, metadata"),(0,r.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," { "),(0,r.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,r.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"filename"),(0,r.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,r.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"=>"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,r.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,r.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"custom.txt"),(0,r.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," })")))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"default_url")," plugin now accepts a ",(0,r.kt)("inlineCode",{parentName:"p"},":host")," option for specifying the URL\nhost."),(0,r.kt)("div",{parentName:"li","data-rehype-pretty-code-fragment":""},(0,r.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,r.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,r.kt)("span",{parentName:"code",className:"line"},(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,r.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":default_url"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", host"),(0,r.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,r.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,r.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"https://example.com"),(0,r.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"')),"\n",(0,r.kt)("span",{parentName:"code",className:"line"}),"\n",(0,r.kt)("span",{parentName:"code",className:"line"},(0,r.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"Attacher"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},".default_url { "),(0,r.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,r.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"/"),(0,r.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"#{"),(0,r.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"name"),(0,r.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"}"),(0,r.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"/missing.png"),(0,r.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," }"))))),(0,r.kt)("div",{parentName:"li","data-rehype-pretty-code-fragment":""},(0,r.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,r.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,r.kt)("span",{parentName:"code",className:"line"},(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"user.avatar_url "),(0,r.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},'#=> "https://example.com/avatar/missing.png"'))))))),(0,r.kt)("h2",{id:"other-improvements"},"Other improvements"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"derivation_endpoint")," plugin now works correctly when ",(0,r.kt)("inlineCode",{parentName:"p"},"moving")," plugin\nis loaded and ",(0,r.kt)("inlineCode",{parentName:"p"},"upload: true")," is set.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Shrine.download_endpoint")," object is now compatible with the Rails router\nagain (this was broken in Shrine 2.15.0).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"rack_response")," plugin was in certain cases producing ",(0,r.kt)("inlineCode",{parentName:"p"},"nil"),"-chunks for\nthe response body, which caused exceptions with some web servers. This has\nnow been fixed.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"rack_response")," plugin now stops retrieving file content that goes past\nthe range specified in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Range")," header. This improves performance for\nstorage classes that internally use ",(0,r.kt)("inlineCode",{parentName:"p"},"Down::ChunkedIO"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"derivation_endpoint"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"rack_response"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"download_endpoint")," plugins\nnow include ",(0,r.kt)("inlineCode",{parentName:"p"},"ETag")," in the headers of responses, preventing the ",(0,r.kt)("inlineCode",{parentName:"p"},"Rack::ETag"),"\nmiddleware from buffering the response body.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Fixed inheritance of ",(0,r.kt)("inlineCode",{parentName:"p"},"process")," blocks in the ",(0,r.kt)("inlineCode",{parentName:"p"},"processing")," plugin. Now adding\n",(0,r.kt)("inlineCode",{parentName:"p"},"process")," blocks in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Shrine")," subclass won't affect the superclass.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Improved performance of ",(0,r.kt)("inlineCode",{parentName:"p"},"Shrine::Storage::FileSystem#delete")," by switching\nfrom ",(0,r.kt)("inlineCode",{parentName:"p"},"Dir.foreach")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"Dir.empty?"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"parsed_json")," plugin now accepts hashes with symbol keys.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"versions")," plugin now accepts string version names in\n",(0,r.kt)("inlineCode",{parentName:"p"},"Shrine::Attacher#url"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"versions")," plugin now supports returning a hash of versions with string\nnames inside the ",(0,r.kt)("inlineCode",{parentName:"p"},"process")," block.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"download_endpoint")," plugin has been rewritten to use plain Rack, so Roda\nisn't a dependency anymore.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The endpoint's ",(0,r.kt)("inlineCode",{parentName:"p"},"#inspect")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"#to_s")," outputs in ",(0,r.kt)("inlineCode",{parentName:"p"},"upload_endpoint"),",\n",(0,r.kt)("inlineCode",{parentName:"p"},"presign_endpoint"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"download_endpoint"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"derivation_endpoint")," plugins\nhave been simplified. Now the ",(0,r.kt)("inlineCode",{parentName:"p"},"rake routes")," command output in Rails apps\nshould be much more compact."),(0,r.kt)("div",{parentName:"li","data-rehype-pretty-code-fragment":""},(0,r.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,r.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,r.kt)("span",{parentName:"code",className:"line"},(0,r.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"# BEFORE:")),"\n",(0,r.kt)("span",{parentName:"code",className:"line"},(0,r.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"ImageUploader"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},".upload_endpoint("),(0,r.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":cache"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},")  "),(0,r.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"#=> #<Shrine::Plugins::UploadEndpoint::App:0x00007f91bec17dc8 @max_size=nil, @rack_response=nil, @shrine_class=ImageUploader, @storage_key=:cache, @upload=nil, @upload_context=nil>")),"\n",(0,r.kt)("span",{parentName:"code",className:"line"},(0,r.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"ImageUploader"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},".presign_endpoint("),(0,r.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":cache"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},") "),(0,r.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"#=> #<Shrine::Plugins::PresignEndpoint::App:0x00007f91beca4ea8 @presign=nil, @presign_location=nil, @presign_options=nil, @rack_response=nil, @shrine_class=ImageUploader, @storage_key=:cache>")),"\n",(0,r.kt)("span",{parentName:"code",className:"line"},(0,r.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"ImageUploader"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},".download_endpoint        "),(0,r.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"#=> #<Class:0x00007f91bed1fa90>")),"\n",(0,r.kt)("span",{parentName:"code",className:"line"},(0,r.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"ImageUploader"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},".derivation_endpoint      "),(0,r.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"#=> #<Shrine::DerivationEndpoint:0x00007f91bed4c900 @options={}, @shrine_class=ImageUploader>")),"\n",(0,r.kt)("span",{parentName:"code",className:"line"}),"\n",(0,r.kt)("span",{parentName:"code",className:"line"},(0,r.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"# AFTER:")),"\n",(0,r.kt)("span",{parentName:"code",className:"line"},(0,r.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"ImageUploader"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},".upload_endpoint("),(0,r.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":cache"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},")  "),(0,r.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"#=> #<ImageUploader::UploadEndpoint(:cache)>")),"\n",(0,r.kt)("span",{parentName:"code",className:"line"},(0,r.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"ImageUploader"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},".presign_endpoint("),(0,r.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":cache"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},") "),(0,r.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"#=> #<ImageUploader::PresignEndpoint(:cache)>")),"\n",(0,r.kt)("span",{parentName:"code",className:"line"},(0,r.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"ImageUploader"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},".download_endpoint        "),(0,r.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"#=> #<ImageUploader::DownloadEndpoint>")),"\n",(0,r.kt)("span",{parentName:"code",className:"line"},(0,r.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"ImageUploader"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},".derivation_endpoint      "),(0,r.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"#=> #<ImageUploader::DerivationEndpoint>")))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"derivation_endpoint")," plugin is now compatible with Rack 1.6.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"metadata_attributes")," plugin now preserves ",(0,r.kt)("inlineCode",{parentName:"p"},"Attacher#assign")," method\nsignature, by retaining the second ",(0,r.kt)("inlineCode",{parentName:"p"},"options")," argument."))),(0,r.kt)("h2",{id:"backwards-compatibility"},"Backwards compatibility"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The support for MRI 2.3 has been dropped.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The automatic filename fallback was removed from the ",(0,r.kt)("inlineCode",{parentName:"p"},":marcel")," analyzer in\n",(0,r.kt)("inlineCode",{parentName:"p"},"determine_mime_type")," plugin, as in some cases it caused MIME type to be\nincorrectly determined and could cause potential security issues. You can\nstill opt in for it:"),(0,r.kt)("div",{parentName:"li","data-rehype-pretty-code-fragment":""},(0,r.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,r.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,r.kt)("span",{parentName:"code",className:"line"},(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,r.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":determine_mime_type"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", analyzer"),(0,r.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,r.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":marcel"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", analyzer_options"),(0,r.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," { filename_fallback"),(0,r.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,r.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},"true"),(0,r.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," }")))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Shrine::Plugins::UploadEndpoint::App")," class from the ",(0,r.kt)("inlineCode",{parentName:"p"},"upload_endpoint"),"\nplugin has been renamed to ",(0,r.kt)("inlineCode",{parentName:"p"},"Shrine::UploadEndpoint"),". The old constant will be\nremoved in Shrine 3.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Shrine::Plugins::PresignEndpoint::App")," class from the ",(0,r.kt)("inlineCode",{parentName:"p"},"presign_endpoint"),"\nplugin has been renamed to ",(0,r.kt)("inlineCode",{parentName:"p"},"Shrine::PresignEndpoint"),". The old constant will\nbe removed in Shrine 3.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Shrine::Plugins::DownloadEndpoint::App")," class is not a ",(0,r.kt)("inlineCode",{parentName:"p"},"Roda")," subclass\nanymore, it's now a PORO whose instance responds to ",(0,r.kt)("inlineCode",{parentName:"p"},"#call"),". This shouldn't\naffect your code unless you were calling Roda methods on that class.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The plugin options of ",(0,r.kt)("inlineCode",{parentName:"p"},"upload_endpoint"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"presign_endpoint"),", and\n",(0,r.kt)("inlineCode",{parentName:"p"},"download_endpoint")," are now internally stored in a different place in\n",(0,r.kt)("inlineCode",{parentName:"p"},"Shrine.opts"),". This shouldn't affect your code unless you were accessing\nthese options directly.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"Shrine::UrlSigner")," internal class in ",(0,r.kt)("inlineCode",{parentName:"p"},"derivation_endpoint")," plugin has\nbeen updated. This shouldn't affect your code unless you were\nusing/overriding that class."))))}N.isMDXComponent=!0}}]);