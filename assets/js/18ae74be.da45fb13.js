"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4333],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>f});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=s(a),u=r,f=d["".concat(p,".").concat(u)]||d[u]||m[u]||o;return a?n.createElement(f,l(l({ref:t},c),{},{components:a})):n.createElement(f,l({ref:t},c))}));function f(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=u;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[d]="string"==typeof e?e:r,l[1]=i;for(var s=2;s<o;s++)l[s]=a[s];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},9752:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>p,default:()=>f,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var n=a(7462),r=a(3366),o=(a(7294),a(3905)),l=["components"],i={title:"Shrine 3.6.0"},p=void 0,s={unversionedId:"release_notes/3.6.0",id:"release_notes/3.6.0",title:"Shrine 3.6.0",description:"New features",source:"@site/../doc/release_notes/3.6.0.md",sourceDirName:"release_notes",slug:"/release_notes/3.6.0",permalink:"/docs/release_notes/3.6.0",draft:!1,editUrl:"https://github.com/shrinerb/shrine/edit/master/doc/../doc/release_notes/3.6.0.md",tags:[],version:"current",lastUpdatedBy:"Janko Marohni\u0107",lastUpdatedAt:1714377072,formattedLastUpdatedAt:"Apr 29, 2024",frontMatter:{title:"Shrine 3.6.0"},sidebar:"release_notes",next:{title:"Shrine 3.5.0",permalink:"/docs/release_notes/3.5.0"}},c={},d=[{value:"New features",id:"new-features",level:2},{value:"Other improvements",id:"other-improvements",level:2},{value:"Backwards compatibility",id:"backwards-compatibility",level:2}],m={toc:d},u="wrapper";function f(e){var t=e.components,a=(0,r.Z)(e,l);return(0,o.kt)(u,(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"new-features"},"New features"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"The S3 storage now accepts ",(0,o.kt)("inlineCode",{parentName:"p"},":copy_options")," when initializing. This can be used for supporting Cloudflare R2 by removing ",(0,o.kt)("inlineCode",{parentName:"p"},":tagging_directive")," when copying file from temporary to permanent storage."),(0,o.kt)("div",{parentName:"li","data-rehype-pretty-code-fragment":""},(0,o.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,o.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,o.kt)("span",{parentName:"code",className:"line"},(0,o.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"Shrine"),(0,o.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"::"),(0,o.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"Storage"),(0,o.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"::"),(0,o.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"S3"),(0,o.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"."),(0,o.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"new"),(0,o.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"(bucket"),(0,o.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,o.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,o.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},"BUCKET"),(0,o.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", copy_options"),(0,o.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,o.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," {}, "),(0,o.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"**"),(0,o.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"s3_options)"))))))),(0,o.kt)("h2",{id:"other-improvements"},"Other improvements"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Rack 3 is now supported.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"When duplicating the attacher, the ",(0,o.kt)("inlineCode",{parentName:"p"},"Attacher#context")," hash is now copied as well, instead of being kept the same between the two attachers.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"After ",(0,o.kt)("inlineCode",{parentName:"p"},"UploadedFile#close")," was called, ",(0,o.kt)("inlineCode",{parentName:"p"},"UploadedFile#opened?")," will return ",(0,o.kt)("inlineCode",{parentName:"p"},"false")," and the uploaded file can be implicitly re-opened again."))),(0,o.kt)("h2",{id:"backwards-compatibility"},"Backwards compatibility"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Shrine API that is returning a rack response triple will now return headers as an instance of ",(0,o.kt)("inlineCode",{parentName:"li"},"Rack::Headers")," on Rack 3, which is a subclass of ",(0,o.kt)("inlineCode",{parentName:"li"},"Hash"),". This should keep user code that references header names in mixed case working (in addition to lowercase), but could theoretically cause issues for code explicitly requiring headers to be an instance of ",(0,o.kt)("inlineCode",{parentName:"li"},"Hash"),".")))}f.isMDXComponent=!0}}]);