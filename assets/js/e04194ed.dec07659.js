"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4363],{3905:(e,a,t)=>{t.d(a,{Zo:()=>m,kt:()=>N});var n=t(7294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function p(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?p(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},p=Object.keys(e);for(n=0;n<p.length;n++)t=p[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(n=0;n<p.length;n++)t=p[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=n.createContext({}),i=function(e){var a=n.useContext(o),t=a;return e&&(t="function"==typeof e?e(a):l(l({},a),e)),t},m=function(e){var a=i(e.components);return n.createElement(o.Provider,{value:a},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},k=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,p=e.originalType,o=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),d=i(t),k=r,N=d["".concat(o,".").concat(k)]||d[k]||c[k]||p;return t?n.createElement(N,l(l({ref:a},m),{},{components:t})):n.createElement(N,l({ref:a},m))}));function N(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var p=t.length,l=new Array(p);l[0]=k;var s={};for(var o in a)hasOwnProperty.call(a,o)&&(s[o]=a[o]);s.originalType=e,s[d]="string"==typeof e?e:r,l[1]=s;for(var i=2;i<p;i++)l[i]=t[i];return n.createElement.apply(null,l)}return n.createElement.apply(null,t)}k.displayName="MDXCreateElement"},9823:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>m,contentTitle:()=>o,default:()=>N,frontMatter:()=>s,metadata:()=>i,toc:()=>d});var n=t(7462),r=t(3366),p=(t(7294),t(3905)),l=["components"],s={title:"Shrine 1.1.0"},o="New plugins",i={unversionedId:"release_notes/1.1.0",id:"release_notes/1.1.0",title:"Shrine 1.1.0",description:"* The download_endpoint plugin has been added, which allows downloading files",source:"@site/../doc/release_notes/1.1.0.md",sourceDirName:"release_notes",slug:"/release_notes/1.1.0",permalink:"/docs/release_notes/1.1.0",draft:!1,editUrl:"https://github.com/shrinerb/shrine/edit/master/doc/../doc/release_notes/1.1.0.md",tags:[],version:"current",lastUpdatedBy:"Janko Marohni\u0107",lastUpdatedAt:1571049580,formattedLastUpdatedAt:"Oct 14, 2019",frontMatter:{title:"Shrine 1.1.0"},sidebar:"release_notes",previous:{title:"Shrine 1.2.0",permalink:"/docs/release_notes/1.2.0"},next:{title:"Shrine 1.0.0",permalink:"/docs/release_notes/1.0.0"}},m={},d=[],c={toc:d},k="wrapper";function N(e){var a=e.components,t=(0,r.Z)(e,l);return(0,p.kt)(k,(0,n.Z)({},c,t,{components:a,mdxType:"MDXLayout"}),(0,p.kt)("h1",{id:"new-plugins"},"New plugins"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("inlineCode",{parentName:"p"},"download_endpoint"),' plugin has been added, which allows downloading files\nthat are otherwise unreachable by URL (e.g. file uploaded to database\nstorages or the "tmp" directory), and also allows authenticating downloads.')),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("inlineCode",{parentName:"p"},"backup")," plugin has been added, which allows automatically backing up\nstored files upon upload."))),(0,p.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,p.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,p.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,p.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":backup"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", storage"),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,p.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":backup_store"))))),(0,p.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,p.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,p.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"User"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},".create(avatar"),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," image) "),(0,p.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"# uploads to :store and :backup_store"))))),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("inlineCode",{parentName:"p"},"delete_uploaded")," plugin has been added for automatically deleting files\nafter they're uploaded (useful for removing temporary files in versions).")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("inlineCode",{parentName:"p"},"upload_options")," plugin has been added, for dynamically generating\nstorage-specific upload options."))),(0,p.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,p.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,p.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,p.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":upload_options"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", store"),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,p.kt)("span",{parentName:"span",style:{color:"#97E1F1"}},"->"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"(io, context) "),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"do")),"\n",(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"  "),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"if"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," ["),(0,p.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":original"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", "),(0,p.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":thumb"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"].include?(context["),(0,p.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":version"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"])")),"\n",(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"    {acl"),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,p.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,p.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"public-read"),(0,p.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"}")),"\n",(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"  "),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"else")),"\n",(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"    {acl"),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,p.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,p.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"private"),(0,p.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"}")),"\n",(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"  "),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"end")),"\n",(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"end"))))),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"The ",(0,p.kt)("inlineCode",{parentName:"li"},"keep_location")," plugin has been added, which allows keeping file location\nwhen moving from cache to store, which can be useful when debugging.")),(0,p.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,p.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,p.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,p.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":keep_location"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},", "),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"cache "),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"=>"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,p.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":store"))))),(0,p.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,p.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,p.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"user "),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"="),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,p.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"User"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"."),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"new")),"\n",(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"user.avatar "),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"="),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," image")),"\n",(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"user.avatar.storage_key "),(0,p.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"#=> :cache")),"\n",(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"user.avatar.id "),(0,p.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},'#=> "abc123.jpg"')),"\n",(0,p.kt)("span",{parentName:"code",className:"line"}),"\n",(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"user.save")),"\n",(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"user.avatar.storage_key "),(0,p.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},"#=> :store")),"\n",(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"user.avatar.id "),(0,p.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},'#=> "abc123.jpg"'))))),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"The ",(0,p.kt)("inlineCode",{parentName:"li"},"default_url")," plugin has been added (extracted from the base\nfunctionality):")),(0,p.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,p.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,p.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"plugin "),(0,p.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":default_url"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"do"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," |context|")),"\n",(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"  "),(0,p.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,p.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"/"),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"#{"),(0,p.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"context["),(0,p.kt)("span",{parentName:"span",style:{color:"#BF9EEE"}},":name"),(0,p.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"]"),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"}"),(0,p.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"/missing.jpg"),(0,p.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"')),"\n",(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"end"))))),(0,p.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,p.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,p.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"user "),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"="),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,p.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"User"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"."),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"new")),"\n",(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"user.avatar_url "),(0,p.kt)("span",{parentName:"span",style:{color:"#7B7F8B"}},'#=> "/avatar/missing.jpg"'))))),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"The ",(0,p.kt)("inlineCode",{parentName:"li"},"remove_invalid")," plugin has been added, for automatically deleting and\ndeassigning cached files that were invalid.")),(0,p.kt)("h1",{id:"new-storages"},"New storages"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("a",{parentName:"p",href:"https://github.com/shrinerb/shrine-fog"},"shrine-fog")," storage has been created for storing files on any of the\ncloud services supported by ",(0,p.kt)("a",{parentName:"p",href:"https://github.com/fog/fog"},"Fog"),".")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("a",{parentName:"p",href:"https://github.com/shrinerb/shrine-imgix"},"shrine-imgix")," storage has been created which intergrates with the ",(0,p.kt)("a",{parentName:"p",href:"http://www.imgix.com"},"Imgix"),"\nservice which provides on-the-fly processing.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("a",{parentName:"p",href:"https://github.com/shrinerb/shrine-cloudinary"},"shrine-cloudinary")," storage as been created for storing files on\n",(0,p.kt)("a",{parentName:"p",href:"http://cloudinary.com"},"Cloudinary"),", which supports upfront, eager and on-the-fly processing.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("a",{parentName:"p",href:"https://github.com/shrinerb/shrine-flickr"},"shrine-flickr")," storage as been created for storing files on\n",(0,p.kt)("a",{parentName:"p",href:"https://www.flickr.com"},"Flickr"),", which automatically generates various sizes of your photos upon\nupload.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("a",{parentName:"p",href:"https://github.com/shrinerb/shrine-gridfs"},"shrine-gridfs")," storage has been created for storing files in MongoDB\nusing the ",(0,p.kt)("a",{parentName:"p",href:"https://docs.mongodb.org/v3.0/core/gridfs/"},"GridFS")," data model.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("a",{parentName:"p",href:"https://github.com/shrinerb/shrine-sql"},"shrine-sql")," storage has been created for storing files in any SQL\ndatabase."))),(0,p.kt)("h1",{id:"new-features"},"New features"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"The S3 storage now accepts ",(0,p.kt)("inlineCode",{parentName:"li"},":upload_options")," for applying additional options\non upload and presigning.")),(0,p.kt)("div",{"data-rehype-pretty-code-fragment":""},(0,p.kt)("pre",{parentName:"div","data-language":"rb","data-theme":"default"},(0,p.kt)("code",{parentName:"pre","data-language":"rb","data-theme":"default"},(0,p.kt)("span",{parentName:"code",className:"line"},(0,p.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"Shrine"),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"::"),(0,p.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"Storage"),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"::"),(0,p.kt)("span",{parentName:"span",style:{color:"#97E1F1",fontStyle:"italic"}},"S3"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"."),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"new"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"(upload_options"),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," {acl"),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},":"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}}," "),(0,p.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,p.kt)("span",{parentName:"span",style:{color:"#E7EE98"}},"public-read"),(0,p.kt)("span",{parentName:"span",style:{color:"#DEE492"}},'"'),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"}, "),(0,p.kt)("span",{parentName:"span",style:{color:"#F286C4"}},"**"),(0,p.kt)("span",{parentName:"span",style:{color:"#F6F6F4"}},"s3_options)"))))),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("inlineCode",{parentName:"p"},":max_size")," has been (re)added to ",(0,p.kt)("inlineCode",{parentName:"p"},"direct_upload")," plugin, for limiting\nthe maximum accepted filesize.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("inlineCode",{parentName:"p"},"data_uri")," plugin now adds ",(0,p.kt)("inlineCode",{parentName:"p"},"UploadedFile#data_uri")," for returning a\nbase64-encoded data URI representation of the file, and ",(0,p.kt)("inlineCode",{parentName:"p"},"UploadedFile#base64"),"\nwhich returns base64-encoded contents of the file."))),(0,p.kt)("h1",{id:"other-improvements"},"Other improvements"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("inlineCode",{parentName:"p"},"backgrounding")," plugin is now compatible with ActiveJob.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The upload endpoint now returns the Roda class itself. This makes the endpoint\ncustomizable, inheritable and inspectable.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"All files are now closed after they're uploaded, which should minimize the\nnumber of open file descriptors in the system.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"Closed a temporary open file descriptor after downloading from FileSystem.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"When an ",(0,p.kt)("inlineCode",{parentName:"p"},"UploadedFile")," is reuploaded, any internal tempfiles will be deleted.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The S3 storage now properly copies files larger than 5 GB, by switching to\nmultipart copy.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The S3 storage can now multi-delete more than 1000 files, by internally\nbatching deletes in groups of 1000 (which is S3's maximum).")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The S3 storage now accepts additonal per-upload options through the\n",(0,p.kt)("inlineCode",{parentName:"p"},"upload_options")," plugin.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("inlineCode",{parentName:"p"},"parallelize")," plugin will now properly work with moving when file is\nuploaded and deleted.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("inlineCode",{parentName:"p"},"around_*")," hooks now return the result of the corresponding operation.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"Generating S3 presign now works properly when ",(0,p.kt)("inlineCode",{parentName:"p"},":endpoint")," option is passed in.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("inlineCode",{parentName:"p"},"data_uri")," plugin now accepts non-base64 data URIs as well.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("inlineCode",{parentName:"p"},"data_uri"),' plugin now accepts MIME types with "+" symbols inside (e.g.\n"application/vnd.api+json")')),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"Downloading file from a URL doesn't do an unnecessary copy of the file anymore.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"Avoid an additional string allocation in ",(0,p.kt)("inlineCode",{parentName:"p"},"S3#read"),".")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("inlineCode",{parentName:"p"},"UploadedFile#mime_type")," is now aliased to ",(0,p.kt)("inlineCode",{parentName:"p"},"#content_type")," to play nice with\nsome HTTP libraries when uploading.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("inlineCode",{parentName:"p"},"pretty_location")," plugin now generates shorter file IDs for better\nreadability.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("inlineCode",{parentName:"p"},"FileSystem#url")," should now work properly for Windows users.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("inlineCode",{parentName:"p"},"context")," hash can now be modified.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"Storages aren't required to rewind the uploaded file anymore, since these\nfiles are now closed.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},'Improved storage linter to test the "special" storage methods as well if\nthey\'re available.'))),(0,p.kt)("h1",{id:"backwards-compatibility"},"Backwards compatibility"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"Files are now closed after they're uploaded by ",(0,p.kt)("inlineCode",{parentName:"p"},"Shrine#upload"),", if you were\nrelying on the previous behaviour you need to update your code.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The default URL functionality has been extracted into the ",(0,p.kt)("inlineCode",{parentName:"p"},"default_url"),"\nplugin, and overriding ",(0,p.kt)("inlineCode",{parentName:"p"},"Shrine#default_url")," is now deprecated.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("inlineCode",{parentName:"p"},":subdirectory")," FileSystem option has been renamed to ",(0,p.kt)("inlineCode",{parentName:"p"},":prefix"),", and the\nold option is now deprecated.")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},"The ",(0,p.kt)("inlineCode",{parentName:"p"},"background_helpers")," plugin has been renamed to ",(0,p.kt)("inlineCode",{parentName:"p"},"backgrounding"),".")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("p",{parentName:"li"},(0,p.kt)("inlineCode",{parentName:"p"},"Shrine.direct_endpoint")," from the ",(0,p.kt)("inlineCode",{parentName:"p"},"direct_upload")," plugin has been deprecated,\nyou should use ",(0,p.kt)("inlineCode",{parentName:"p"},"Shrine::UploadEndpoint")," instead."))))}N.isMDXComponent=!0}}]);