<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-release_notes/2.19.0">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Shrine 2.19.0 | Shrine</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://shrinerb.com/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://shrinerb.com/img/logo.png"><meta data-rh="true" property="og:url" content="https://shrinerb.com/docs/release_notes/2.19.0"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Shrine 2.19.0 | Shrine"><meta data-rh="true" name="description" content="New features"><meta data-rh="true" property="og:description" content="New features"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://shrinerb.com/docs/release_notes/2.19.0"><link data-rh="true" rel="alternate" href="https://shrinerb.com/docs/release_notes/2.19.0" hreflang="en"><link data-rh="true" rel="alternate" href="https://shrinerb.com/docs/release_notes/2.19.0" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://KBFWBJ5DPX-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Shrine" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.efb93a3c.css">
<link rel="preload" href="/assets/js/runtime~main.9151cbe8.js" as="script">
<link rel="preload" href="/assets/js/main.73137c51.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Shrine logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Shrine logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Shrine</b></a><a class="navbar__item navbar__link" href="/docs/getting-started">Guides</a><a class="navbar__item navbar__link" href="/docs/plugins/activerecord">Plugins</a><a class="navbar__item navbar__link" href="/docs/external/extensions">External</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/release_notes/3.6.0">Release Notes</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/shrinerb/shrine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/shrinerb/shrine/discussions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/shrinerb/shrine/wiki" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Wiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/release_notes/3.6.0">Shrine 3.x</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/3.6.0">Shrine 3.6.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/3.5.0">Shrine 3.5.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/3.4.0">Shrine 3.4.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/3.3.0">Shrine 3.3.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/3.2.2">Shrine 3.2.2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/3.2.1">Shrine 3.2.1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/3.2.0">Shrine 3.2.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/3.1.0">Shrine 3.1.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/3.0.1">Shrine 3.0.1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/3.0.0">Shrine 3.0.0</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/release_notes/2.19.0">Shrine 2.x</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/release_notes/2.19.0">Shrine 2.19.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.18.0">Shrine 2.18.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.17.0">Shrine 2.17.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.16.0">Shrine 2.16.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.15.0">Shrine 2.15.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.14.0">Shrine 2.14.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.13.0">Shrine 2.13.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.12.0">Shrine 2.12.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.11.0">Shrine 2.11.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.10.1">Shrine 2.10.1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.10.0">Shrine 2.10.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.9.0">Shrine 2.9.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.8.0">Shrine 2.8.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.7.0">Shrine 2.7.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.6.1">Shrine 2.6.1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.6.0">Shrine 2.6.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.5.0">Shrine 2.5.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.4.1">Shrine 2.4.1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.4.0">Shrine 2.4.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.3.1">Shrine 2.3.1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.3.0">Shrine 2.3.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.2.0">Shrine 2.2.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.1.1">Shrine 2.1.1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.1.0">Shrine 2.1.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.0.1">Shrine 2.0.1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/2.0.0">Shrine 2.0.0</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/release_notes/1.4.2">Shrine 1.x</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/1.4.2">Shrine 1.4.2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/1.4.1">Shrine 1.4.1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/1.4.0">Shrine 1.4.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/1.3.0">Shrine 1.3.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/1.2.0">Shrine 1.2.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/1.1.0">Shrine 1.1.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/release_notes/1.0.0">Shrine 1.0.0</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Shrine 2.19.0</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-features">New features<a href="#new-features" class="hash-link" aria-label="Direct link to New features" title="Direct link to New features">​</a></h2><ul><li><p>A new <code>instrumentation</code> plugin has been added. It sends and logs events for
various Shrine operations, and provides an API for other plugins to send and
log their own events.</p><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#97E1F1;font-style:italic">Shrine</span><span style="color:#F6F6F4">.plugin </span><span style="color:#BF9EEE">:instrumentation</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4">uploaded_file </span><span style="color:#F286C4">=</span><span style="color:#F6F6F4"> </span><span style="color:#97E1F1;font-style:italic">Shrine</span><span style="color:#F6F6F4">.upload(io, </span><span style="color:#BF9EEE">:store</span><span style="color:#F6F6F4">)</span></span>
<span class="line"><span style="color:#F6F6F4">uploaded_file.exists?</span></span>
<span class="line"><span style="color:#F6F6F4">uploaded_file.download</span></span>
<span class="line"><span style="color:#F6F6F4">uploaded_file.delete</span></span></code></pre></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Metadata (32ms) – {:storage=&gt;:store, :io=&gt;StringIO, :uploader=&gt;Shrine}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Upload (1523ms) – {:storage=&gt;:store, :location=&gt;&quot;ed0e30ddec8b97813f2c1f4cfd1700b4&quot;, :io=&gt;StringIO, :upload_options=&gt;{}, :uploader=&gt;Shrine}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Exists (755ms) – {:storage=&gt;:store, :location=&gt;&quot;ed0e30ddec8b97813f2c1f4cfd1700b4&quot;, :uploader=&gt;Shrine}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Download (1002ms) – {:storage=&gt;:store, :location=&gt;&quot;ed0e30ddec8b97813f2c1f4cfd1700b4&quot;, :download_options=&gt;{}, :uploader=&gt;Shrine}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Delete (700ms) – {:storage=&gt;:store, :location=&gt;&quot;ed0e30ddec8b97813f2c1f4cfd1700b4&quot;, :uploader=&gt;Shrine}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It supports <a href="https://api.rubyonrails.org/classes/ActiveSupport/Notifications.html" target="_blank" rel="noopener noreferrer">ActiveSupport::Notifications</a> (default) and <a href="https://github.com/dry-rb/dry-monitor" target="_blank" rel="noopener noreferrer">dry-monitor</a>
notification backends out of the box.</p><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#F286C4">require</span><span style="color:#F6F6F4"> </span><span style="color:#DEE492">&quot;</span><span style="color:#E7EE98">dry-monitor</span><span style="color:#DEE492">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#97E1F1;font-style:italic">Shrine</span><span style="color:#F6F6F4">.plugin </span><span style="color:#BF9EEE">:instrumentation</span><span style="color:#F6F6F4">, notifications</span><span style="color:#F286C4">:</span><span style="color:#F6F6F4"> </span><span style="color:#97E1F1;font-style:italic">Dry</span><span style="color:#F286C4">::</span><span style="color:#97E1F1;font-style:italic">Monitor</span><span style="color:#F286C4">::</span><span style="color:#97E1F1;font-style:italic">Notifications</span><span style="color:#F6F6F4">.</span><span style="color:#F286C4">new</span><span style="color:#F6F6F4">(</span><span style="color:#BF9EEE">:test</span><span style="color:#F6F6F4">)</span></span></code></pre></div></li><li><p>Metadata extraction can now be skipped during the upload by passing
<code>metadata: false</code> to the uploader. This is useful in tests, where you might
want to skip any potentially expensive metadata extraction while creating
test data.</p><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#F6F6F4">uploaded_file </span><span style="color:#F286C4">=</span><span style="color:#F6F6F4"> uploader.upload(io, metadata</span><span style="color:#F286C4">:</span><span style="color:#F6F6F4"> </span><span style="color:#BF9EEE">false</span><span style="color:#F6F6F4">) </span><span style="color:#7B7F8B"># skips metadata extraction</span></span>
<span class="line"><span style="color:#F6F6F4">uploaded_file.metadata </span><span style="color:#7B7F8B">#=&gt; {}</span></span></code></pre></div></li><li><p>Metadata extraction can now be forced during the upload of a
<code>Shrine::UploadedFile</code> object by passing <code>metadata: true</code> to the uploader.</p><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#F6F6F4">uploaded_file </span><span style="color:#F286C4">=</span><span style="color:#F6F6F4"> uploader.upload(another_uploaded_file, metadata</span><span style="color:#F286C4">:</span><span style="color:#F6F6F4"> </span><span style="color:#BF9EEE">true</span><span style="color:#F6F6F4">) </span><span style="color:#7B7F8B"># forces metadata extraction</span></span>
<span class="line"><span style="color:#F6F6F4">uploaded_file.metadata </span><span style="color:#7B7F8B">#=&gt; re-extracted metadata</span></span></code></pre></div></li><li><p>The <code>pretty_location</code> plugin now supports specifying a different identifier.</p><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#F6F6F4">plugin </span><span style="color:#BF9EEE">:pretty_location</span><span style="color:#F6F6F4">, identifier</span><span style="color:#F286C4">:</span><span style="color:#F6F6F4"> </span><span style="color:#DEE492">&quot;</span><span style="color:#E7EE98">uuid</span><span style="color:#DEE492">&quot;</span></span>
<span class="line"><span style="color:#7B7F8B"># &quot;user/aa357797-5845-451b-8662-08eecdc9f762/profile_picture/493g82jf23.jpg&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4">plugin </span><span style="color:#BF9EEE">:pretty_location</span><span style="color:#F6F6F4">, identifier</span><span style="color:#F286C4">:</span><span style="color:#F6F6F4"> </span><span style="color:#BF9EEE">:email</span></span>
<span class="line"><span style="color:#7B7F8B"># &quot;user/foo@bar.com/profile_picture/493g82jf23.jpg&quot;</span></span></code></pre></div></li><li><p>The <code>store_dimensions</code> plugin has gained an <code>:on_error</code> option for specifying
how to react when an error occurrs while extracting dimensions.</p><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#F6F6F4">plugin </span><span style="color:#BF9EEE">:store_dimensions</span><span style="color:#F6F6F4">, on_error</span><span style="color:#F286C4">:</span><span style="color:#F6F6F4"> </span><span style="color:#BF9EEE">:warn</span><span style="color:#F6F6F4">        </span><span style="color:#7B7F8B"># prints a warning message (default)</span></span>
<span class="line"><span style="color:#F6F6F4">plugin </span><span style="color:#BF9EEE">:store_dimensions</span><span style="color:#F6F6F4">, on_error</span><span style="color:#F286C4">:</span><span style="color:#F6F6F4"> </span><span style="color:#BF9EEE">:fail</span><span style="color:#F6F6F4">        </span><span style="color:#7B7F8B"># raises the exception</span></span>
<span class="line"><span style="color:#F6F6F4">plugin </span><span style="color:#BF9EEE">:store_dimensions</span><span style="color:#F6F6F4">, on_error</span><span style="color:#F286C4">:</span><span style="color:#F6F6F4"> </span><span style="color:#BF9EEE">:ignore</span><span style="color:#F6F6F4">      </span><span style="color:#7B7F8B"># ignores the exception</span></span>
<span class="line"><span style="color:#F6F6F4">plugin </span><span style="color:#BF9EEE">:store_dimensions</span><span style="color:#F6F6F4">, on_error</span><span style="color:#F286C4">:</span><span style="color:#F6F6F4"> </span><span style="color:#97E1F1">-&gt;</span><span style="color:#F6F6F4"> (error) { </span><span style="color:#7B7F8B"># custom handler</span></span>
<span class="line"><span style="color:#F6F6F4">  </span><span style="color:#7B7F8B"># report the exception to your exception handler</span></span>
<span class="line"><span style="color:#F6F6F4">}</span></span></code></pre></div></li><li><p>The <code>FileSystem#upload</code> method now accepts a <code>:move</code> option for moving the
file instead of copying it. This is now preferred over the <code>moving</code> plugin.</p><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#F6F6F4">uploader.upload(file, move</span><span style="color:#F286C4">:</span><span style="color:#F6F6F4"> </span><span style="color:#BF9EEE">true</span><span style="color:#F6F6F4">)</span></span>
<span class="line"><span style="color:#97E1F1;font-style:italic">File</span><span style="color:#F6F6F4">.exist?(file.path) </span><span style="color:#7B7F8B">#=&gt; false</span></span></code></pre></div></li><li><p>The <code>FileSystem#clear!</code> method can now take a block for more control over
which files should be deleted.</p><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#F6F6F4">file_system.clear! { |path| path.mtime </span><span style="color:#F286C4">&lt;</span><span style="color:#F6F6F4"> </span><span style="color:#97E1F1;font-style:italic">Time</span><span style="color:#F6F6F4">.now </span><span style="color:#F286C4">-</span><span style="color:#F6F6F4"> </span><span style="color:#BF9EEE">7</span><span style="color:#F286C4">*</span><span style="color:#BF9EEE">24</span><span style="color:#F286C4">*</span><span style="color:#BF9EEE">60</span><span style="color:#F286C4">*</span><span style="color:#BF9EEE">60</span><span style="color:#F6F6F4"> } </span><span style="color:#7B7F8B"># delete files older than 1 week</span></span></code></pre></div></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-improvements">Other improvements<a href="#other-improvements" class="hash-link" aria-label="Direct link to Other improvements" title="Direct link to Other improvements">​</a></h2><ul><li><p>Registering storage objects under string keys now works again (this got
broken in version 2.18.0).</p></li><li><p>Several plugins now add their own instrumentation when the <code>instrumentation</code>
plugin has been loaded:</p><table><thead><tr><th align="left">Plugin</th><th align="left">Instrumentation</th></tr></thead><tbody><tr><td align="left"><code>derivation_endpoint</code></td><td align="left">instruments file processing</td></tr><tr><td align="left"><code>determine_mime_type</code></td><td align="left">instruments analyzing MIME type</td></tr><tr><td align="left"><code>store_dimensions</code></td><td align="left">instruments extracting image dimensions</td></tr><tr><td align="left"><code>signature</code></td><td align="left">instruments calculating signature</td></tr><tr><td align="left"><code>infer_extension</code></td><td align="left">instruments inferring extension</td></tr><tr><td align="left"><code>remote_url</code></td><td align="left">instruments remote URL downloading</td></tr><tr><td align="left"><code>data_uri</code></td><td align="left">instruments data URI parsing</td></tr></tbody></table></li><li><p><code>Shrine.logger</code> has been added, and any warnings or other messages (such as
from the <code>instrumentation</code> plugin) now go through it. This way you can change
the logging destination:</p><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#7B7F8B"># log messages into the Rails logger</span></span>
<span class="line"><span style="color:#97E1F1;font-style:italic">Shrine</span><span style="color:#F6F6F4">.logger </span><span style="color:#F286C4">=</span><span style="color:#F6F6F4"> </span><span style="color:#97E1F1;font-style:italic">Rails</span><span style="color:#F6F6F4">.logger</span></span></code></pre></div></li><li><p>The <code>store_dimensions</code> plugin now prints warnings by default when extracting
dimensions failed.</p></li><li><p>The <code>pretty_location</code> plugin now comes with a <code>#pretty_location</code> method which
you can call for customization.</p><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#F286C4">def</span><span style="color:#F6F6F4"> </span><span style="color:#62E884">generate_location</span><span style="color:#F6F6F4">(</span><span style="color:#FFB86C;font-style:italic">io</span><span style="color:#F6F6F4">, </span><span style="color:#BF9EEE">record</span><span style="color:#F286C4">:</span><span style="color:#F6F6F4"> </span><span style="color:#BF9EEE">nil</span><span style="color:#F6F6F4">, </span><span style="color:#F286C4">**</span><span style="color:#F6F6F4">context)</span></span>
<span class="line"><span style="color:#F6F6F4">  identifier </span><span style="color:#F286C4">=</span><span style="color:#F6F6F4"> record.email </span><span style="color:#F286C4">if</span><span style="color:#F6F6F4"> record.is_a?(</span><span style="color:#BF9EEE">User</span><span style="color:#F6F6F4">)</span></span>
<span class="line"><span style="color:#F6F6F4">  pretty_location(io, record</span><span style="color:#F286C4">:</span><span style="color:#F6F6F4"> record, identifier</span><span style="color:#F286C4">:</span><span style="color:#F6F6F4"> identifier, </span><span style="color:#F286C4">**</span><span style="color:#F6F6F4">context)</span></span>
<span class="line"><span style="color:#F286C4">end</span></span></code></pre></div></li><li><p>The <code>Shrine::UploadedFile#[]</code> operator has been added for easier metadata
retrieving.</p><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#F6F6F4">uploaded_file.metadata[</span><span style="color:#DEE492">&quot;</span><span style="color:#E7EE98">duration</span><span style="color:#DEE492">&quot;</span><span style="color:#F6F6F4">]</span></span>
<span class="line"><span style="color:#7B7F8B"># can now be just</span></span>
<span class="line"><span style="color:#F6F6F4">uploaded_file[</span><span style="color:#DEE492">&quot;</span><span style="color:#E7EE98">duration</span><span style="color:#DEE492">&quot;</span><span style="color:#F6F6F4">]</span></span></code></pre></div></li><li><p>The <code>Shrine.mime_type</code>, <code>Shrine.dimensions</code>, and <code>Shrine.signature</code> aliases
have been added to <code>determine_mime_type</code>, <code>store_dimensions</code>, and <code>signature</code>
plugins.</p><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#97E1F1;font-style:italic">Shrine</span><span style="color:#F6F6F4">.determine_mime_type(io)</span></span>
<span class="line"><span style="color:#7B7F8B"># can now be just</span></span>
<span class="line"><span style="color:#97E1F1;font-style:italic">Shrine</span><span style="color:#F6F6F4">.mime_type(io)</span></span></code></pre></div><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#97E1F1;font-style:italic">Shrine</span><span style="color:#F6F6F4">.extract_dimensions(io)</span></span>
<span class="line"><span style="color:#7B7F8B"># can now be just</span></span>
<span class="line"><span style="color:#97E1F1;font-style:italic">Shrine</span><span style="color:#F6F6F4">.dimensions(io)</span></span></code></pre></div><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#97E1F1;font-style:italic">Shrine</span><span style="color:#F6F6F4">.calculate_signature(io)</span></span>
<span class="line"><span style="color:#7B7F8B"># can now be just</span></span>
<span class="line"><span style="color:#97E1F1;font-style:italic">Shrine</span><span style="color:#F6F6F4">.signature(io)</span></span></code></pre></div></li><li><p>The <code>#validate_{max,min}_dimensions</code> validators have been added to the
<code>validation_helpers</code> plugin.</p><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#F6F6F4">validate_min_width  </span><span style="color:#BF9EEE">10</span></span>
<span class="line"><span style="color:#F6F6F4">validate_min_height </span><span style="color:#BF9EEE">10</span></span>
<span class="line"><span style="color:#F6F6F4">validate_max_width  </span><span style="color:#BF9EEE">5000</span></span>
<span class="line"><span style="color:#F6F6F4">validate_max_height </span><span style="color:#BF9EEE">5000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B"># can now be written as</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4">validate_min_dimensions [</span><span style="color:#BF9EEE">10</span><span style="color:#F6F6F4">, </span><span style="color:#BF9EEE">10</span><span style="color:#F6F6F4">]</span></span>
<span class="line"><span style="color:#F6F6F4">validate_max_dimensions [</span><span style="color:#BF9EEE">5000</span><span style="color:#F6F6F4">, </span><span style="color:#BF9EEE">5000</span><span style="color:#F6F6F4">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B"># which can be additionally shortened to</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4">validate_dimensions [</span><span style="color:#BF9EEE">10</span><span style="color:#F6F6F4">..</span><span style="color:#BF9EEE">5000</span><span style="color:#F6F6F4">, </span><span style="color:#BF9EEE">10</span><span style="color:#F6F6F4">..</span><span style="color:#BF9EEE">5000</span><span style="color:#F6F6F4">]</span></span></code></pre></div></li><li><p>The <code>#validate_size</code>, <code>#validate_width</code>, and <code>#validate_height</code> shorthands
have been added to the <code>validation_helpers</code> plugin.</p><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#F6F6F4">validate_min_size </span><span style="color:#BF9EEE">1024</span></span>
<span class="line"><span style="color:#F6F6F4">validate_max_size </span><span style="color:#BF9EEE">10</span><span style="color:#F286C4">*</span><span style="color:#BF9EEE">1024</span><span style="color:#F286C4">*</span><span style="color:#BF9EEE">1024</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B"># can now be shortned to</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4">validate_size </span><span style="color:#BF9EEE">1024</span><span style="color:#F6F6F4">..</span><span style="color:#BF9EEE">10</span><span style="color:#F286C4">*</span><span style="color:#BF9EEE">1024</span><span style="color:#F286C4">*</span><span style="color:#BF9EEE">1024</span></span></code></pre></div><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#F6F6F4">validate_min_width </span><span style="color:#BF9EEE">10</span></span>
<span class="line"><span style="color:#F6F6F4">validate_max_width </span><span style="color:#BF9EEE">5000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B"># can now be shortened to</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4">validate_width </span><span style="color:#BF9EEE">10</span><span style="color:#F6F6F4">..</span><span style="color:#BF9EEE">5000</span></span></code></pre></div><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#F6F6F4">validate_min_height </span><span style="color:#BF9EEE">10</span></span>
<span class="line"><span style="color:#F6F6F4">validate_max_height </span><span style="color:#BF9EEE">5000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B"># can now be shortened to</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4">validate_height </span><span style="color:#BF9EEE">10</span><span style="color:#F6F6F4">..</span><span style="color:#BF9EEE">5000</span></span></code></pre></div></li><li><p>The <code>#validate_mime_type</code> and <code>#validate_extension</code> shorthands have been
added to the <code>validation_helpers</code> plugin.</p><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#F6F6F4">validate_mime_type_inclusion </span><span style="color:#F286C4">%</span><span style="color:#F6F6F4">w[image</span><span style="color:#F286C4">/</span><span style="color:#F6F6F4">jpeg image</span><span style="color:#F286C4">/</span><span style="color:#F6F6F4">png image</span><span style="color:#F286C4">/</span><span style="color:#F6F6F4">webp]</span></span>
<span class="line"><span style="color:#7B7F8B"># can now be just</span></span>
<span class="line"><span style="color:#F6F6F4">validate_mime_type </span><span style="color:#F286C4">%</span><span style="color:#F6F6F4">w[image</span><span style="color:#F286C4">/</span><span style="color:#F6F6F4">jpeg image</span><span style="color:#F286C4">/</span><span style="color:#F6F6F4">png image</span><span style="color:#F286C4">/</span><span style="color:#F6F6F4">webp]</span></span></code></pre></div><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#F6F6F4">validate_extension_inclusion </span><span style="color:#F286C4">%</span><span style="color:#F6F6F4">w[jpeg png webp]</span></span>
<span class="line"><span style="color:#7B7F8B"># can now be just</span></span>
<span class="line"><span style="color:#F6F6F4">validate_extension </span><span style="color:#F286C4">%</span><span style="color:#F6F6F4">w[jpeg png webp]</span></span></code></pre></div></li><li><p>Default error messages in <code>validation_helpers</code> plugin have been simplified.</p></li><li><p>You can now call <code>super</code> when overriding <code>Shrine::UploadedFile</code> methods
defined by the <code>add_metadata</code> plugin.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="backwards-compatibility">Backwards compatibility<a href="#backwards-compatibility" class="hash-link" aria-label="Direct link to Backwards compatibility" title="Direct link to Backwards compatibility">​</a></h2><ul><li><p>The <code>logging</code> plugin has been deprecated in favour of the <code>instrumentation</code>
plugin.</p></li><li><p>The <code>moving</code> pluing has been deprecated in favour of the <code>:move</code> option to
<code>FileSystem#upload</code>. This means that the <code>#move</code> &amp;&amp; <code>#movable?</code> methods are
not part of the storage abstraction anymore.</p></li><li><p>The <code>backup</code> plugin has been deprecated (a new <code>mirroring</code> plugin will get
added in 3.0).</p></li><li><p>The <code>copy</code> plugin has been deprecated.</p></li><li><p>The <code>Shrine::Plugins::DataUri::DataFile</code> constant from the <code>data_uri</code> plugin
has been renamed to <code>Shrine::DataFile</code>.</p></li><li><p>The <code>Shrine::Plugins::RackFile::UploadedFile</code> constant from the <code>data_uri</code> plugin
has been renamed to <code>Shrine::RackFile</code>.</p></li><li><p>The <code>:older_than</code> option for <code>FileSystem#clear!</code> has been deprecated in
favour of passing a block.</p><div data-rehype-pretty-code-fragment=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="line"><span style="color:#F6F6F4">file_system.clear!(older_than</span><span style="color:#F286C4">:</span><span style="color:#F6F6F4"> </span><span style="color:#97E1F1;font-style:italic">Time</span><span style="color:#F6F6F4">.now </span><span style="color:#F286C4">-</span><span style="color:#F6F6F4"> </span><span style="color:#BF9EEE">7</span><span style="color:#F286C4">*</span><span style="color:#BF9EEE">24</span><span style="color:#F286C4">*</span><span style="color:#BF9EEE">60</span><span style="color:#F286C4">*</span><span style="color:#BF9EEE">60</span><span style="color:#F6F6F4">)</span></span>
<span class="line"><span style="color:#7B7F8B"># should now be replaced with</span></span>
<span class="line"><span style="color:#F6F6F4">file_system.clear! { |path| path.mtime </span><span style="color:#F286C4">&lt;</span><span style="color:#F6F6F4"> </span><span style="color:#97E1F1;font-style:italic">Time</span><span style="color:#F6F6F4">.now </span><span style="color:#F286C4">-</span><span style="color:#F6F6F4"> </span><span style="color:#BF9EEE">7</span><span style="color:#F286C4">*</span><span style="color:#BF9EEE">24</span><span style="color:#F286C4">*</span><span style="color:#BF9EEE">60</span><span style="color:#F286C4">*</span><span style="color:#BF9EEE">60</span><span style="color:#F6F6F4"> }</span></span></code></pre></div></li><li><p>The <code>FileSystem#upload</code> method deprecates ignoring unrecognized upload
options.</p></li><li><p>The <code>FileSystem#upload</code> method doesn&#x27;t backfill <code>size</code> metadata anymore if an
IO with unknown size is being uploaded via <code>Shrine#upload</code>.</p></li><li><p>Several plugins have changed how they store configuration options internally.
If you were accessing these options directly, you will need to update your
code.</p></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/shrinerb/shrine/edit/master/doc/../doc/release_notes/2.19.0.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2019-10-18T23:40:13.000Z">Oct 18, 2019</time></b> by <b>Janko Marohnić</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/release_notes/3.0.0"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Shrine 3.0.0</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/release_notes/2.18.0"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Shrine 2.18.0</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#new-features" class="table-of-contents__link toc-highlight">New features</a></li><li><a href="#other-improvements" class="table-of-contents__link toc-highlight">Other improvements</a></li><li><a href="#backwards-compatibility" class="table-of-contents__link toc-highlight">Backwards compatibility</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Janko Marohnić</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9151cbe8.js"></script>
<script src="/assets/js/main.73137c51.js"></script>
</body>
</html>