<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head>
<title>3.1.0.md</title>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
<script type='text/javascript'>
  function popupCode(url) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  
  function toggleCode(id) {
    var code = document.getElementById(id)
  
    code.style.display = code.style.display != 'block' ? 'block' : 'none'
    return true
  }
  
  // Make codeblocks hidden by default
  document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
</script>
</head>
<body class='page'>
<div class='file' id='wrapper'>
<div class='header'>
<h1 class='name'>3.1.0.md
</h1>
<div class='paths'>
doc/release_notes/3.1.0.md
</div>
<div class='last-update'>
Last Update:
<span class='datetime'>2023-07-10 16:53:28 +0200</span>
</div>
</div>
<div id='content'>
<div id='text'>
<div id='description'>
<p>—</p>

<h2 id="label-title-3A+Shrine+3.1.0">title: <a href="../../../classes/Shrine.html"><code>Shrine</code></a> <a href="3_1_0_md.html">3.1.0</a><span><a href="#label-title-3A+Shrine+3.1.0">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h2 id="label-New+features">New features<span><a href="#label-New+features">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>The <code>Attacher#create_derivatives</code> method now accepts a <code>:storage</code> option for  specifying the storage to which derivatives should be uploaded.</p>
</li></ul>

<p>“‘rb  # with attachment module  photo.image_derivatives!(storage: :other_store)</p>

<p># with attacher  attacher.create_derivatives(storage: :other_store)  “‘</p>
<ul><li>
<p>The <code>Shrine.calculate_signature</code> now accepts a <code>:rewind</code> boolean option for  choosing whether the IO object should be rewinded after reading. This is  useful if you want to calculate signature from non-rewindable IO objects,  such as <code>IO.pipe</code>, <code>Socket</code>, non-rewindable <code>Down::ChunkedIO</code> etc.</p>
</li></ul>

<p><code>rb   Shrine.signature(io, rewind: false) </code></p>

<h2 id="label-Improvements">Improvements<span><a href="#label-Improvements">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>The derivatives processor can now be registered with <code>Attacher.derivatives</code>,  which is just an alias for <code>Attacher.derivatives_processor</code>.</p>
</li></ul>

<p>“‘rb  class ImageUploader &lt; <a href="../../../classes/Shrine.html"><code>Shrine</code></a>  Attacher.derivatives_processor do |original|  # …  end  end</p>

<p># can now be written as</p>

<p>class ImageUploader &lt; <a href="../../../classes/Shrine.html"><code>Shrine</code></a>  Attacher.derivatives do |original|  # …  end  end  “‘</p>
<ul><li>
<p>The <code>Attacher#cached?</code> and <code>Attacher#stored?</code> methods now work correctly if  temporary/permanent storage identifiers were specified as strings.</p>
</li><li>
<p>The <code>store_dimensions</code> plugin now properly propagates exceptions when loading  the <code>ruby-vips</code> gem in <code>:vips</code> analyzer.</p>
</li><li>
<p>The <code>add_metadata</code> plugin now respects inheritance again when defining  metadata methods on the <code>Shrine::UploadedFile</code> class. In <a href="2_19_0_md.html">2.19.0</a>, the  <code>add_metadata</code> plugin was changed to define metadata methods on the internal  <code>FileMethods</code> plugin module, which is shared across all uploaders. This  change has now been reverted.</p>
</li></ul>

<h2 id="label-Backwards+compatibility">Backwards compatibility<span><a href="#label-Backwards+compatibility">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>The <code>Attacher#cache_key</code> and <code>Attacher#store_key</code> methods now always return  symbol keys, even if the storage key that was specified was a string key.</p>
</li></ul>

<p><code>rb   attacher = Shrine::Attacher.new(cache: &quot;cache&quot;, store: &quot;store&quot;)   attacher.cache_key #=&gt; :cache (previously &quot;cache&quot;)   attacher.store_key #=&gt; :store (previously &quot;store&quot;) </code></p>
<ul><li>
<p>The <code>add_metadata</code> plugin now defines metadata methods directly on the  <code>UploadedFile</code> class, which means that if you happen to have been overriding  these metadata methods and calling <code>super</code>, this won’t work anymore.</p>
</li></ul>
</div>
<div id='context'>
</div>

</div>
</div>

<div id='footer-push'></div>
</div>
<div id='footer'>
<a href="https://github.com/jeremyevans/hanna-nouveau"><strong>Hanna Nouveau</strong> RDoc template</a>
</div>
</body>
</html>
