<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head>
<title>2.10.0.md</title>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
<script type='text/javascript'>
  function popupCode(url) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  
  function toggleCode(id) {
    var code = document.getElementById(id)
  
    code.style.display = code.style.display != 'block' ? 'block' : 'none'
    return true
  }
  
  // Make codeblocks hidden by default
  document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
</script>
</head>
<body class='page'>
<div class='file' id='wrapper'>
<div class='header'>
<h1 class='name'>2.10.0.md
</h1>
<div class='paths'>
doc/release_notes/2.10.0.md
</div>
<div class='last-update'>
Last Update:
<span class='datetime'>2023-07-07 09:26:16 +0200</span>
</div>
</div>
<div id='content'>
<div id='text'>
<div id='description'>
<p>â€”</p>

<h2 id="label-title-3A+Shrine+2.10.0">title: <a href="../../../classes/Shrine.html"><code>Shrine</code></a> <a href="2_10_0_md.html">2.10.0</a><span><a href="#label-title-3A+Shrine+2.10.0">&para;</a> <a href="#top">&uarr;</a></span></h2>

<h2 id="label-New+features">New features<span><a href="#label-New+features">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>The <code>:mini_magick</code> analyzer has been added to the <code>store_dimensions</code> plugin,  which uses the <a target="_top" href="https://github.com/minimagick/minimagick">MiniMagick</a> gem to extract image dimensions.</p>
</li><li>
<p>The <code>:ruby_vips</code> analyzer has been added to the <code>store_dimensions</code> plugin,  which uses the <a target="_top" href="https://github.com/libvips/ruby-vips">ruby-vips</a> gem to extract image dimensions.</p>
</li><li>
<p>The <code>:fastimage</code> analyzer has been added to the <code>determine_mime_type</code> plugin,  which uses the <a target="_top" href="https://github.com/sdsykes/fastimage">FastImage</a> gem to determine the MIME type of the file.</p>
</li><li>
<p><code>Shrine::UploadedFile#download</code> now accepts a block for downloading an  uploaded file temporarily. This is useful when wanting to validate whether an  uploaded image is valid or corrupted, or when generating thumbnails.</p>
</li></ul>

<pre class="ruby"><span class="ruby-identifier">uploaded_file</span>.<span class="ruby-identifier">download</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tempfile</span><span class="ruby-operator">|</span>
  <span class="ruby-comment"># ...</span>
<span class="ruby-keyword">end</span> <span class="ruby-comment"># tempfile is deleted</span>
</pre>

<h2 id="label-Other+improvements">Other improvements<span><a href="#label-Other+improvements">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>It's not required that IO objects respond to <code>#size</code> anymore. This is  useful when uploading streams of data where the size is not known.</p>
</li><li>
<p>The S3 storage now supports IO objects with unknown size. Under the hood it  will use multipart upload.</p>
</li><li>
<p>The logger is now properly inherited and shared between <code>Shrine</code> subclasses.</p>
</li><li>
<p>The attachment URL generated by <code>download_endpoint</code> now stays the same  regardless of the order of elements in the metadata hash. Previously it could  change after the uploaded file data is loaded from the database, because the  order of the metadata hash elements would change, which is not desirable for  caching.</p>
</li></ul>

<h2 id="label-Backwards+compatibility">Backwards compatibility<span><a href="#label-Backwards+compatibility">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>The <code>:rack_mime</code> extension inferrer has been removed from the  <code>infer_extension</code> plugin, due to not having acceptable behaviour. The new  default extension inferrer is <code>:mime_types</code>.</p>
</li><li>
<p>The <code>:heroku</code> formatter in the <code>logging</code> plugin has been soft-renamed to  <code>:logfmt</code>. The <code>:heroku</code> alias will stop being supported in <a href="../../../classes/Shrine.html"><code>Shrine</code></a> 3.</p>
</li><li>
<p>The <code>Shrine::IO_METHODS</code> constant has been depreacted, and will become  private in <a href="../../../classes/Shrine.html"><code>Shrine</code></a> 3.</p>
</li></ul>
</div>
<div id='context'>
</div>

</div>
</div>

<div id='footer-push'></div>
</div>
<div id='footer'>
<a href="https://github.com/jeremyevans/hanna-nouveau"><strong>Hanna Nouveau</strong> RDoc template</a>
</div>
</body>
</html>
